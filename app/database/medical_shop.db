-- Create the suppliers table
CREATE TABLE suppliers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    contact TEXT NOT NULL
);

-- Create the products table (for inventory and expiry tracking)
CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    quantity INTEGER NOT NULL CHECK(quantity >= 0),
    price FLOAT NOT NULL CHECK(price >= 0),
    expiry_date DATE NOT NULL,
    supplier_id INTEGER,
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id)
);

-- Create the bill table
CREATE TABLE bill (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_name TEXT NOT NULL CHECK(length(customer_name) <= 100),
    date TEXT NOT NULL CHECK(length(date) <= 100), -- Renamed 'data' to 'date' for clarity
    total_price FLOAT NOT NULL,
    items TEXT NOT NULL -- Stores JSON string of product IDs and quantities
);
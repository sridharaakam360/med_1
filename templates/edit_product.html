{% extends 'base.html' %}

{% block title %}Edit Product{% endblock %}

{% block content %}
    <section class="edit-product-section">
        <h2>Edit Product (ID: {{ product_id }})</h2>
        <form method="POST" class="edit-product-form">
            {{ form.hidden_tag() }}
            <div class="form-group">
                <label for="name">Product Name</label>
                <input type="text" id="name" name="name" value="{{ form.name.data or '' }}" required aria-describedby="name-help">
                <small id="name-help" class="form-text">Enter the product name.</small>
                {% if form.name.errors %}
                    <ul class="errors">
                        {% for error in form.name.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="quantity">Quantity</label>
                <input type="number" id="quantity" name="quantity" min="0" value="{{ form.quantity.data or 0 }}" required aria-describedby="quantity-help">
                <small id="quantity-help" class="form-text">Enter the quantity in stock.</small>
                {% if form.quantity.errors %}
                    <ul class="errors">
                        {% for error in form.quantity.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="price">Price (â‚¹)</label>
                <input type="number" id="price" name="price" min="0" step="0.01" value="{{ form.price.data or 0.00 }}" required aria-describedby="price-help">
                <small id="price-help" class="form-text">Enter the price per unit.</small>
                {% if form.price.errors %}
                    <ul class="errors">
                        {% for error in form.price.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="expiry_date">Expiry Date</label>
                <input type="date" id="expiry_date" name="expiry_date" value="{{ form.expiry_date.data | default(today, true) }}" required aria-describedby="expiry-date-help">
                <small id="expiry-date-help" class="form-text">Select the expiry date.</small>
                {% if form.expiry_date.errors %}
                    <ul class="errors">
                        {% for error in form.expiry_date.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="supplier_id">Supplier</label>
                <select id="supplier_id" name="supplier_id" aria-describedby="supplier-help">
                    <option value="0">Select Supplier (Optional)</option>
                    {% for supplier in suppliers %}
                        <option value="{{ supplier[0] }}" {% if form.supplier_id.data == supplier[0] %}selected{% endif %}>{{ supplier[1] }}</option>
                    {% endfor %}
                </select>
                <small id="supplier-help" class="form-text">Select a supplier, if applicable.</small>
                {% if form.supplier_id.errors %}
                    <ul class="errors">
                        {% for error in form.supplier_id.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update Product</button>
                <a href="{{ url_for('inventory') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </section>
{% endblock %}